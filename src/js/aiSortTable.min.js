/* *
 * aiSortTable - Simple JavaScript table sorting.
 * alexanderkx: https://github.com/alexanderkx
 * repo: https://github.com/alexanderkx/aiSortTable
 *
 */

var aiSortTable=function(){return buildTable=function(t,e,r){for(var a=t.getElementsByTagName("th"),l=t.querySelectorAll("tbody")[0],s=0;s<e.length;s++){var n=a[e[s]];n.dataset.col=e[s],n.classList.add("ai_th_sortable","ai_th_sortable__up"),n.addEventListener("click",function(){toggleClass(this),sortProcess(this,l),r(this)})}renderTable(l,e)},toggleClass=function(t){t.classList.toggle("ai_th_sortable__down"),t.classList.toggle("ai_th_sortable__up")},renderTable=function(t,e){for(var r=t.querySelectorAll("tr"),a=0;a<e.length;a++)for(var l=0;l<r.length;l++){var s=r[l].getElementsByTagName("td")[e[a]];s.classList.add("ai_td","ai_td_sorter_"+e[a]),r[l].classList.add("ai_tr_root")}},chekValue=function(t){return/^-?[\d.]+(?:e-?\d+)?$/.test(t)},sortProcess=function(t,e){for(var r=e.querySelectorAll(".ai_td"),a=0;a<r.length;a++)r[a].classList.remove("ai_td_active");if(0!=t)var l=t.dataset.col;else l=0;var s=document.querySelectorAll(".ai_td_sorter_"+l),n=[].slice.call(s);n.sort(function(e,r){var a="",l="";return chekValue(e.innerHTML)?(a=+e.innerHTML,l=+r.innerHTML):(a=e.innerHTML,l=r.innerHTML),t.classList.contains("ai_th_sortable__down")?a>l:l>a});for(var o=0;o<n.length;o++)n[o].parentNode.dataset.aisorter=o,n[o].classList.add("ai_td_active");var i=document.querySelectorAll(".ai_tr_root"),c=[].slice.call(i);c.sort(function(t,e){return t.dataset.aisorter-e.dataset.aisorter}),e.innerHTML="";for(var d=0;d<c.length;d++)e.innerHTML+=c[d].outerHTML},{init:function(t,e,r){var t=document.getElementById(t);buildTable(t,e,r)}}}();